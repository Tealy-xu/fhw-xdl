#繁花唯商城系统(Fhuawei)

##程序设计说明书

>文件状态：
-[√]草稿
-[]正式发布
-[]正在修改

> * 文件标识：	LAMP兄弟连 交通组
> * 当前版本：	V1.0
> * 作    者：	梁嘉杰、许廷霖、张琦
> * 完成日期：	2016-5-03

## 版 本 历 史 ##

| 版本/状态  | 作者 | 起止日期 | 备注 |
| ------------ | -------------|
| v1.0 |*||2016-5-03|第一版|

----------

![](7.jpg/)

#1 引言
我们开发的是一个B2C模式商城，也就是电子商务系统。根据市场调研，全面了解客户需求，故此为客户提供一个方便、快捷、安全、人性化的系统。本系统基于PHP语言开发，同时结合了知名的ThinkPHP框架然后进行开发，并且统一管理。

##1.1 编写目的
本说明是繁花唯商城系统(Fhuawei)程序设计说明，记录了系统整体实现上技术层面上的设计。程序设计
说明书是进行系统编码的依据，编写本文档的目的在于为程序员的编码提供详细的说明，使程序员能
根据详细设计的框图进行正确的编码。并且以需求说明作为依据，同时该文档将作为产品实现、特性
要求和控制的依据。本文档的读者对象为程序员，系统设计人员。软件开发小组的每一位参与开发成
员应该阅读本说明，以清楚产品在技术方面的要求和实现策略。

##1.2 背景
电子商城发展迅速，各类管理系统也应运而生，针对各类大型电子商城的开发已经非常成熟，从拍下到订单，再到付款，收货确认，都可以做到统一管理。前台可以做到预定实物，虚拟物品等各种预定业务。电子商城是一功能比较完善的数据管理软件，具有数据操作方便高效迅速等优点。

##1.3 定义
为了便于表达及避免歧义，现将本说明书中使用的专门术语的定义和外文首字母组词的原词组列
表如下：
> xxx ：xxxx 
ThinkPHP：国内知名的ThinkPHP框架

##1.4 使用技术
>开发技术：HTML、PHP、ThinkPHP 框架、JavaScript、Juqery
数据库技术：MySQL
PHP引擎版本：PHP5.4
程序控制软件：Sublime Text 3

##1.5 参考资料
>A、《细说 PHP》
B、《 ThinkPHP3.2.2完全开发手册》
C、《W3CSchool》
D、《php中文手册 最新评论整合版》
E、《需求分析说明书》
编码规范
需求分析说明书
数据库设计说明书

#2 系统的结构
系统总体结构设计采用了 MVC 的设计模式，和完全使用面向对象的思想开发，并根据 ThinkPHP
框架的规则去规划视图、控制器和实体类及调用关系。提高代码的易维护性、易读性，增加类内部的纯度、类之间调用的灵活性。

##2.1 项目的目录结构
在需求阶段，我们将XXX商城系统分为了前台和后台两个应用。因为是通过 ThinkPHP 框架进行开发，所以只需要为每个应用单独声明一个入口文件，分别命名为 index.php(前台入口)和 admin.php(后台应用入口)，并存放到项目目录 ThinkPHP（该目存放在 Web 服务器的根目录下）下面。在前台应用的入口文件 index.php 中指定前台的应用目录为“ home”目录，在后台应用的入口文件 admin.php 中指定后台的应用目录为“ admin”目录。分别访问两个入口文件 ThinkPHP 自动生成项目结构目录，WEB部署目录和ThinkPHP框架系统目录如下所示：

>www  WEB部署目录（或者子目录）
├─index.php       入口文件
├─README.md       README文件
├─Application     应用目录
├─Public          资源文件目录
└─ThinkPHP        框架目录

>├─ThinkPHP 框架系统目录（可以部署在非web目录下面）
│  ├─Common       核心公共函数目录
│  ├─Conf         核心配置目录 
│  ├─Lang         核心语言包目录
│  ├─Library      框架类库目录
│  │  ├─Think     核心Think类库包目录
│  │  ├─Behavior  行为类库目录
│  │  ├─Org       Org类库包目录
│  │  ├─Vendor    第三方类库目录
│  │  ├─ ...      更多类库目录
│  ├─Mode         框架应用模式目录
│  ├─Tpl          系统模板目录
│  ├─LICENSE.txt  框架授权协议文件
│  ├─logo.png     框架LOGO文件
│  ├─README.txt   框架README文件
│  └─ThinkPHP.php    框架入口文件

按 ThinkPHP 框架的要求，程序的配置文件使用项目目录下的 conventio.php文件，模块配置文件目录放在 APP/Common/conf目录中，公用的图片、 js 和 css 等资源存放在 public 目录中，用户上传的图片存放在public/uploads/目录中。

后台应用的目录为项目目录下的 admin 目录，控制器、视图和模型分别写在 controller 目录、 view 目录和 model 目录中。前台应用也是独立的，存放在项目目录下的 home 目录下，也有对应的控制器、视图和模型目录。


##2.2 模块结构
>按需求分析的结果，将后台应用分为   个模块，前台应用分为   个模块。根据主要功能确定前
后和后台应用中每个模块的操作和操作权限，如下表 2.2-1 和 2.2-2 所示：

###表 2.2-1前台应用的模块操作说明

|模块|操作|	权限|	负责人|
|-----|-----|------|
|登陆注册|获取注册界面、添加、登陆处理、退出、唯一性检查|无|梁嘉杰|
|首页展示|导航栏、商品分类、推荐商品、友情链接|无|许廷霖|
|列表管理|显示选择的所有商品展示界面、筛选、排序、情况|无|张琦|
|商品详情管理	|商品信息、商品收藏、商品详情、评论详情|无|	许廷霖|
|购物管理|购物流程、购物车、订单确认、提交订单、下单（三级联动）、收货地址|登陆用户|张琦|
|个人中心|收货地址、站内信息、订单管理、个人资料、收货地址、签到积分系统、我的收藏|登录用户|梁嘉杰|



-------

###表 2.2-2后台应用的模块操作说明
|模块|	操作|	权限|	负责人|
|----|-----|-----|-----|
|操作界面管理	|顶部信息管理、侧边栏管理、主操作区管理、底部管理|管理员|张琦|
|登录|登录验证、退出|管理员|梁嘉杰|
|商品管理|实现增删改查、商品上下架、是否新品、时尚、热销等|管理员|张琦|
|用户管理|增删改查、权限判断|管理员|梁嘉杰|
|分类管理|实现增删改查、排序功能、显示状态|	管理员|	张琦|
|订单管理|显示订单、交易情况、订单修改、发货等|	管理员|梁嘉杰|
|评论管理|审核情况、回复情况、前台显示|	管理员|许廷霖|
|公告管理|增删改查、批量操作、状态改变、搜索分页	|管理员|许廷霖|
|友情连接|名称、链接、图片、显示状态、操作|	管理员|许廷霖|

###后台应用每个控制器类的结构说明

|模块|控制器|操作方法|简要说明|
|----|----|-----|-----|
|登录管理||Login|login() <br>logout()|获取登录界面的操作、执行登录<br>退出登录|
|操作界面管理|Index|index()|获取首页界面|
|用户管理|User|	index()<br>	add()<br>mod()<br>del()<br>uppic()<br>setAuth()|获取用户列表<br>获取用户添加界面，添加用户<br>获取用户修改界面，修改用户<br>删除用户<br>上传图片、图片处理<br>权限设置|
|商品管理|	Goods	|index()<br>add()<br>mod()<br>del()<br>upload()<br>getSortout()<br>getSort()<br>set()<br>detail()	|获取商品列表<br>添加商品<br>商品修改<br>商品删除<br>图片上传处理<br>获取商品分类（模板AJAX请求）<br>获取商品分类（控制器内部调用）<br>设置商品标签以及销售属性<br>添加商品信息展示图片|
|商品分类管理|Sort|index()<br>add()<br>add_tow()<br>add_thr()<br>del()<br>mod()|获取现有商品分类<br>添加商品一级分类<br>添加二级分类<br>添加多级分类<br>删除分类<br>修改分类|	
|订单管理|	Order|	index()<br>mod()<br>del()|	获取订单列表<br>修改订单状态<br>取消订单|
|评论管理|Comment|index()<br>del()<br>mod()<br>uppic()|获取评论表<br>删除评论<br>差评处理<br>图片上传|
|用户组管理|	Group|	index()<br>add()<br>mod()<br>del()|	用户组列表显示<br>用户组添加<br>用户组修改<br>用户组删除|	
|权限判断|Public	|_initialize()|自动调用，权限验证|
--------------------


###前台应用每个控制器类的结构说明

|模块|控制器|操作方法|简要说明|
|---|---|---|---|
|首页展示|Index|index()<br>lists()<br>getSort()|	获取首页的全部内容，广告、商品分类、不同分类下是商品遍历<br>列表页展示、获取所有分类，特定分类的商品<br>获取分类（AJAX返回，页面左边商品分类显示）|
|购物车相关|Cart|cart()<br>reduceNum()<br>addNum()<br>del()<br>setOrder()<br>getCart()|获取购物车信息，显示购物车<br>通过AJAX减少商品数量<br>通过AJAX增加商品数量<br>通过AJAX删除商品<br>设置要付款的商品<br>通过AJAX获取购物车信息|
|详情页|	Detail|	particulars ()<br>cart()<br>getComment()<br>getOrder()|商品详情页展示<br>通过AJAX加入购物车<br>通过AJAX获取评论（AJAX分页）<br>通过AJAX获取订单（AJAX分页）|
|订单相关|Order|order()<br>creOrder()<br>review()<br>addComment()<br>affirm()|商品确认页面展示，获取用户地址<br>生成订单、同时清除购物车信息<br>获取订单信息、展示评论页面<br>生成评论、修改订单状态<br>确认收货（AJAX）|	
|搜索分页|Search|grabble()|查询数据、展示页面|
|用户相关|User|register()<br>code()<br>checkCode()<br>login()<br>loginOut()<br>uploadpic()<br>uppic()<br>getUsername()<br>baseinfo()<br>order()<br>setAddress()<br>address()<br>addressDel()|用户注册<br>设置验证码相关参数<br>检测验证码<br>用户登录<br>用户退出<br>用户头像修改<br>图形上传处理<br>检测用户名是否存在<br>显示个人基本信息<br>个人订单展示（不同状态显示<br>添加、编辑地址<br>显示用户地址<br>用户地址删除|
-------------------